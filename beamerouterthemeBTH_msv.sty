% BTH Beamer template
% Created 2009-06-02
% Adapted to BTH 2011 GP 2012-03-02
% Mikael.Svahnberg@bth.se


% Assumed page dimensions (128mm x 96mm).

\RequirePackage{ifthen}
\RequirePackage{pgf}
\RequirePackage{helvet}

\mode<presentation>

% Lengths
\newlength{\logowidth}
\setlength{\logowidth}{1.7cm}

\newlength{\margin}
\setlength{\margin}{0.5cm}

\newlength{\smallmargin}
\setlength{\smallmargin}{0.1cm}

\newlength{\headwidth}
\setlength{\headwidth}{12cm}


% Images
\pgfdeclareimage[width=\logowidth]{BTHLogo}{BTHlogo.png}
\pgfdeclareimage[width=\logowidth]{BTHHeaderBG}{BTHHeaderBG.png}
\pgfdeclareimage[width=\paperwidth]{BTHbg_first}{BTHbg_firstslide}
\pgfdeclareimage[width=\paperwidth]{BTHbg}{BTHbg}

% headline
\defbeamertemplate*{headline}{bth theme}%
{%
% Frame Numbers (Not available in Official BTH slides)
\pgfputat{\pgfpoint{\paperwidth-\smallmargin}{-0.5mm}}{\pgfbox[right,top]{%
	\usebeamerfont{frame number in foot}%
	\usebeamercolor[fg]{frame number in foot}\insertframenumber{}/\inserttotalframenumber%
}}%
}

% frametitle
\defbeamertemplate*{frametitle}{bth theme}%
{%
	\vspace{0.7cm}%
	\begin{beamercolorbox}[wd=\headwidth,left]{frame title}%
	\hspace{\logowidth}
	\insertframetitle\par%
	% XXX herein lies the problem. You would think that a minipage or a parbox would solve it, would you not?
	\end{beamercolorbox}%
	\vspace{0.4cm}%
}

% footline
\defbeamertemplate*{footline}{bth theme}
{%
}%

% set left and right text margins
\setbeamersize{text margin left=\margin, text margin right=\margin}

% background
\defbeamertemplate*{background canvas}{bth theme}
{%
    \ifnum\c@framenumber=1%
      \pgfuseimage{BTHbg_first}
    \else%
      \pgfuseimage{BTHbg}%
    \fi%
}

\mode
<all>